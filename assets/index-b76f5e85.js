import{d as p,o as s,c as r,a as l,b as g,r as i,w as V,u as y,e as x,f as h,t as O,g as w,h as N,i as P}from"./index-6f719ecc.js";import{F as _,g as R,R as f,v as T,s as C,a as I}from"./lib-107a1c78.js";const M={for:"input-code",class:"font-semibold text-slate-900"},$=["value"],k=p({__name:"index",props:{modelValue:String},emits:["update:modelValue"],setup(c,{emit:n}){const a=c,o=t=>{n("update:modelValue",t.target.value)};return(t,m)=>(s(),r("div",null,[l("label",M,[g("Введите код из SMS "),l("input",{id:"input-code",class:"focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 pl-2 mt-5 ring-1 ring-slate-200 shadow-sm",type:"text","aria-label":"Код из SMS",placeholder:"Код из SMS",value:a.modelValue,onInput:o},null,40,$)])]))}}),B={for:"input-phone",class:"font-semibold text-slate-900"},U=["value"],A=p({__name:"index",props:{modelValue:String},emits:["update:modelValue"],setup(c,{emit:n}){const a=c,o=t=>{n("update:modelValue",t.target.value)};return(t,m)=>(s(),r("div",null,[l("label",B,[g("Введите номер телефона "),l("input",{id:"input-phone",class:"focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 pl-2 mt-5 ring-1 ring-slate-200 shadow-sm",type:"text","aria-label":"Номер телефона",placeholder:"Номер телефона",value:a.modelValue,onInput:o},null,40,U)])]))}}),v=Object.freeze(Object.defineProperty({__proto__:null,InputCode:k,InputPhone:A},Symbol.toStringTag,{value:"Module"})),D=["onSubmit"],F={key:2,class:"text-sm text-red-400 m-none mt-4"},j=l("div",{class:"mt-5"},[l("input",{type:"submit",class:"bg-indigo-600 text-white text-sm leading-6 font-medium py-2 px-3 rounded-lg w-full cursor-pointer",value:"Далее"})],-1),H=p({__name:"index",setup(c){const n=i(0),a=i(""),o=i(""),t=i("");V(o,()=>t.value="");async function m(){n.value===0?await S():await b()}async function S(){const d={[_.PHONE_NUMBER]:a.value};await R(d).then(e=>{e.statusText===f.OK&&(n.value=1)}).catch(()=>{})}const E=y();async function b(){const d={[_.PHONE_NUMBER]:a.value,[_.OTP_CODE]:o.value};await T(d).then(e=>{e.statusText===f.OK&&(C(e.data.access_token),E.push({path:"/personal"}))}).catch(e=>{var u;((u=e.response)==null?void 0:u.statusText)===f.UNPROCESSABLE_ENTITY&&(t.value=I.INCORRECT_CODE)})}return(d,e)=>(s(),r("form",{class:"max-w-md",onSubmit:N(m,["prevent"])},[n.value===0?(s(),x(h(v).InputPhone,{key:0,modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value=u)},null,8,["modelValue"])):(s(),x(h(v).InputCode,{key:1,modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=u=>o.value=u)},null,8,["modelValue"])),t.value?(s(),r("p",F,O(t.value),1)):w("",!0),j],40,D))}}),K={class:"container mx-auto px-4 pt-10"},L=l("h2",{class:"text-lg font-semibold text-slate-900 mb-8"},"Вход в личный кабинет",-1),Y=p({__name:"index",setup(c){return(n,a)=>(s(),r("div",K,[L,P(h(H))]))}});export{Y as default};
